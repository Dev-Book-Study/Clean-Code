## 17장 냄새와 휴리스틱

---

> 휴리스틱 Heuristic
>
> "경험적인, 스스로 발견하게 하는" 이라는 뜻
>
> 어림짐작, 대충 내린 결정 / 무엇인가를 보고 대충 이럴 것이다 라고 빠르게 판단을 내리는 것을 의미.

### 1. 주석

- __C1: 부적절한 정보__
  - 다른 시스템에 저장할 정보는 주석으로 적절하지 못하다. ==> 예를 들어, 변경 이력은 정황한 날짜와 따분한 내용으로 소스 코드만 번잡하게 한다.
  - 일반적으로 작성자, 최종 수정일, SPR 번호 등과 같은 메타 정보만 주석으로 넣는다
  - _주석은 코드와 설계에 기술적인 설명을 부연하는 수단이다_

> SRP (Software Problem Report)
>
> 개발이 완료되어 사용 중에 있는 소프트웨어를 환경적응, 오류수정, 성능향상 등을 위하여 계속하여 수정, 보완하는 일

- __C2: 쓸모 없는 주석__
  - 오래된 주석, 엉뚱한 주석, 잘못된 주석은 더 이상 쓸모가 없다.
  - 이런 쓸모 없는 주석은 아예 달지 않거나 빨리 삭제하는 것이 좋다.
- __C3: 중복된 주석__
  - 코드만으로 충분하지만 구구절절 설명하는 주석이 바로 중복된 주석이다.

```java
// 예시1
i++;	// i 증가

// 예시2
/**
	* @param sellRequest
	* @return
	* @throws ManagedComponentException
	*/
public SellResponse beginSellItem(sellRequest sellRequest)
  throws ManagedComponentException
```

- __C4: 성의 없는 주석__
  - 주석을 달려면 시간을 들여 신중한 단어, 올바른 문법과 구두점, 간결하고 명료하게 최대한 멋지게 작성하자 ==> 즉, 작성할 가치가 있는 주석은 성의를 들려 주석을 작성하라.
- __C5: 주석 처리된 코드__
  - 누군가에게 필요하다고 생각되어 주석으로 처리된 코드는 아무도 지우지 않고 매일매일 낡아간다.
  - 주석으로 처리된 코드를 발견하면 즉각 지워라. ==> 어차피 소스 코드 관리 시스템이 기억한다.

---

### 2. 환경

- __E1: 여러 단계로 빌드해야 한다__
  - 빌드는 간단히 한 단계로 끝나야 한다. ==> 불가해한 명령이나 스크립트를 잇달아 실행해 각 요소를 따로 빌드할 필요가 없게 하자..!
- __E2: 여러 단계로 테스트해야 한다__
  - 모든 단위 테스트는 한 명령으로 돌려야 한다. ==> IDE에서 버튼 하나로 모든 테스트를 돌린다면 가장 이상적!!
  - 모든 테스트를 한 번에 실행하는 능력은 아주 근본적으로 아주 중요함

---

### 3. 함수

- __F1: 너무 많은 인수__
  - 함수에서 인수 개수는 작을수록 좋다. ==> 하나, 둘, 셋이 차례로 좋다.
  - 넷 이상은 최대한 피해라..
- __F2: 출력 인수__
  - 일반적으로 독자는 인수를 출력이 아닌 입력으로 간주한다.
  - 함수에서 뭔가의 상태를 변경해야 한다면 함수가 속한 객체의 상태를 변경하자.
- __F3: 플래그 인수__
  - `boolean` 인수는 함수가 여러 기능을 수행한다는 증거이다. ==> 이는 혼란을 초래하므로 피해야 마땅하다.
- __F4: 죽은 함수__
  - 아무도 호출하지 않는 함수는 삭제한다.

---

### 4. 일반

- __G1: 한 소스 파일에 여러 언어를 사용한다__
  - 이상적으로 소스 파일 하나에 언어 하나만 사용하는 방식이 가장 좋다.
  - 현실적으로 여러 언어사용이 불가피하지만, 언어 수와 범위를 최대한 줄여 소스 파일을 작성하도록 해보자.
- __G2: 당연한 동작을 구현하지 않는다__
  - _최소 놀람의 원칙_ 에 의거해 함수나 클래스는 다른 프로그래머가 당연하게 여길 동작과 기능을 제공해야 한다.
  - 당연한 동작을 구현하지 않으면 코드를 읽거나 사용하는 사람이 더 이상 함수 이름만으로 함수 기능을 직관적으로 예상하기 어렵다. ==> 저자를 신뢰하지 못하므로 코드를 일일이 살펴야 한다.

> 최소 놀람의 원칙 The Principle of Least Surprise
>
> "필요한 기능에 크나큰 깜짝 놀래킬만한 요소가 있다면 해당 기능을 다시 설계할 필요가 있을 수 있다"는 것이 이 원칙의 일반적인 공식이다.
>
> 코드가 읽는 이를 놀라게 해서는 안된다. 표준 코딩 컨벤션을 따르고 주석과 명명이 의미 전달을 잘 해야 하며, 잠재적으로 놀래킬 수 있는 부작용을 최소화 하라.

- __G3: 경계를 올바로 처리하지 않는다__
  - 코드는 올바로 동작해야 한다. 
  - 스스로의 직관에 의존하지 말고, 모든 경계 조건을 찾아내며 그 조건들을 테스트하는 테스트 케이스를 작성해라.
- __G4: 안전 절차 무시__
  - serialVersionUID 를 직접 제어할 필요가 있을지 모르지만, 직접 제어는 언제나 위험하다.
  - 컴파일러 경고 일부를 무시하고 꺼버리면 끝없는 디버깅에 시달릴 수 있다.
  - 실패한 테스트 케이스를 제끼고 나중으로 미루는 태도를 지양하다.
- __G5: 중복__
  - 어디서든 중복을 발견하면 없애라.
- __G6: 추상화 수준이 올바르지 못하다__
  - 추상화는 저차원 상세 개념에서 고차원 일반 개념을 분리한다.
  - 모든 저차원 개념은 파생 클래스에 넣고, 모든 고차원 개념은 기초 클래스에 넣는다. ==> 고차원 개념과 저차원 개념을 섞지 마라.
- __